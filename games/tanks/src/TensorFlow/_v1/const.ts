// consts.ts - Константы для модели и расчета наград

// Размерность входного вектора с учетом дополнительного ID-поля
// export const INPUT_DIM = 23 + 5 * 10 + 5 * 20; // базовые параметры + враги (5 значений каждый) + пули (5 значений каждая)

// Константы для калибровки вознаграждений
export const REWARD_WEIGHTS = {
    HEALTH_CHANGE: 0.5,        // За потерю всего здоровья (от 1 до 0) штраф -7
    HEALTH_BONUS: 0.05,        // За полное здоровье бонус +0.05 (незначительный)
    AIM_QUALITY: 2.5,          // Максимум +2.5 за идеальное прицеливание
    SHOOTING_AIMED: 1.0,        // +1.0 за стрельбу при хорошем прицеливании
    SHOOTING_RANDOM: -0.5,      // -0.5 за случайную стрельбу
    BULLET_AVOIDANCE: -2.0,     // До -2.0 за нахождение на пути пули
    MOVEMENT_BASE: 0.05,        // Незначительный бонус за движение
    STRATEGIC_MOVEMENT: 0.2,    // Небольшой бонус за стратегическое движение
    SURVIVAL: 0.02,             // Маленький постоянный бонус за выживание
    MAP_BORDER: -3.0,           // Значительный штраф за выход за границы
    BORDER_GRADIENT: -0.5,      // Умеренный штраф при приближении к границе
    DISTANCE_KEEPING: 0.3,      // Бонус за поддержание оптимальной дистанции
    VICTORY: 10.0,              // Полный бонус +10 за победу (лучший исход)
    DEATH: -5.0,                // Существенный штраф -5 за уничтожение (но не самый худший)
};

// Гиперпараметры модели
export const MODEL_PARAMS = {
    LEARNING_RATE: 0.001,
    BATCH_SIZE: 64,
    GAMMA: 0.99,         // Коэффициент дисконтирования
    EPSILON_START: 1.0,  // Начальная вероятность случайного действия
    EPSILON_END: 0.1,    // Конечная вероятность случайного действия
    EPSILON_DECAY: 0.995, // Скорость уменьшения случайности
    TARGET_UPDATE_FREQ: 10, // Частота обновления целевой сети
    REPLAY_BUFFER_SIZE: 10000, // Размер буфера воспроизведения
};

// Параметры для различных аспектов модели
export const MODEL_CONFIG = {
    // Общие параметры
    SHARED_LAYERS: [128, 64],

    // Параметры ветви движения
    MOVEMENT_LAYERS: [64],
    MOVEMENT_OUTPUT_DIM: 2,

    // Параметры ветви прицеливания
    AIM_LAYERS: [64],
    AIM_OUTPUT_DIM: 2,

    // Параметры ветви стрельбы
    SHOOT_LAYERS: [32],
    SHOOT_OUTPUT_DIM: 1,
};